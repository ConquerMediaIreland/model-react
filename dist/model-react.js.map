{"version":3,"file":"model-react.js","sources":["../src/cmp/BasicForm.js"],"sourcesContent":["import React, { Fragment, useCallback } from 'react'\n\nimport { useSelector } from 'react-redux'\n\nimport { Gubu, Skip, Exact, Any, Required } from 'gubu'\n\n\n\nconst BasicFormShape = Gubu({\n  name: String,\n  slice: String,\n  title: Skip(String),\n  intro: Skip(String),\n  btnTitle: Skip(String),\n  fields: [{\n    name: String,\n    title: String,\n    kind: Exact('line','toggle','choice'),\n    // subtype: Skip(Exact('email')),\n    subkind: Skip(String),\n    placeholder: Skip(String),\n    items: Skip([{\n      value: Required(Any()),\n      text: String,\n    }]),\n    explainer: Skip(String),\n    orient: 'vertical',\n    classes: '',\n  }],\n  submit: Function,\n  submitCmp: Any(),\n  // orient: Default('vertical', Exact('vertical','horizontal'))\n  orient: 'vertical',\n  classes: '',\n})\n\n\n\nfunction BasicField(props) {\n  const field = props.field\n  const form = props.form\n  const store = props.store\n  \n  const { name, title, orient, kind } = field\n\n  const classes = 'vxg-basic-field vxg-basic-field-'+orient+\n        ' vxg-basic-field-'+kind+' '+\n        field.classes\n\n  const value = useSelector(state => state[form.slice][form.name][name])\n  \n  const onChange = (ev)=>{\n    store.dispatch({\n      type: form.slice + '/setField_' + form.name,\n      payload: { name, value: ev.target.value }\n    })\n  }\n\n  \n  \n  return (\n    <div className={classes}>\n\n      { 'toggle' === field.kind ?\n        <input\n          type=\"checkbox\"\n          id={form.name+'-'+field.name}\n          name={field.name}\n          value={value}\n          onChange={onChange}\n        /> : <></> }\n\n      <label htmlFor={name}>{title}</label>\n\n      { 'line' === field.kind ?\n        <input\n          id={form.name+'-'+field.name}\n          name={field.name}\n          placeholder={field.placeholder}\n          value={value}\n          onChange={onChange}\n        /> : <></> }\n\n      { 'choice' === field.kind ?\n        <select\n          id={form.name+'-'+field.name}\n          name={field.name}\n          placeholder={field.placeholder}\n          value={value}\n          onChange={onChange}\n        >\n\n          { field.items.map(\n            item=>\n              <option\n                key={item.value}\n                value={item.value}\n              >\n                {item.text}\n              </option>\n          )}\n\n        </select> : <></> }\n\n    </div>\n  )\n}\n\n\nfunction getBasicForm(conf) {\n  let { store } = conf\n  \n  function BasicForm(props) {\n    console.log('BasicForm', props)\n\n    const form = BasicFormShape(props.form)\n    \n    const meta = useSelector(state => state[form.slice].form[form.name])\n    \n    const title = form.title\n    const intro = form.intro\n    const name = form.name\n    const slice = form.slice\n    const btnTitle = form.btnTitle\n    const blank = form.blank\n    const fields = form.fields || []\n    const submit = form.submit || (() => null)\n    const submitCmp = form.submitCmp\n    const orient = form.orient\n    const classes = form.classes\n    \n    return (\n      <form\n        onSubmit={submit}\n        className={'vxg-basic-form vxg-basic-form-'+orient+' '+classes}\n      >\n        {null != title ? <h2>{title}</h2> : <></>}\n\n        {null != intro ? <p className=\"intro\">{intro}</p> : <></>}\n\n        { fields\n          .map(field =>\n               <BasicField\n                 key={field.name}\n                 field={field}\n                 form={form}\n                 store={store}\n               />) }\n\n        { submitCmp }\n        \n      </form>\n    )\n\n    \n  }\n\n  return {\n    BasicFormShape,\n    BasicField,\n    BasicForm,\n  }\n}\n\n\nexport {\n  getBasicForm\n}\n\n"],"names":["BasicFormShape","Gubu","name","String","slice","title","Skip","intro","btnTitle","fields","kind","Exact","subkind","placeholder","items","value","Required","Any","text","explainer","orient","classes","submit","Function","submitCmp","BasicField","props","field","form","store","useSelector","state","onChange","ev","dispatch","type","payload","target","React","map","item","getBasicForm","conf","BasicForm","console","log","meta"],"mappings":"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"}